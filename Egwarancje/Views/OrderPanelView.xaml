<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="Egwarancje.Views.OrderPanelView"
             xmlns:vm="clr-namespace:Egwarancje.ViewModels"
             xmlns:models="clr-namespace:EgwarancjeDbLibrary.Models;assembly=EgwarancjeDbLibrary"
             x:DataType="vm:OrderPanelViewModel"
             BackgroundColor="#1E1E1E"
             Title="OrderPanelView">
    <Grid>
        <ScrollView>
            <StackLayout Margin="20,20">
                <Label Text="Podgląd zamówień"
                   TextColor="White"
                   FontAttributes="Bold"
                   Margin="0, 20"
                   FontSize="30"
                   HorizontalOptions="Start"
                   />
                <CollectionView ItemsSource="{Binding Orders}"
                            HorizontalOptions="CenterAndExpand"
                            VerticalOptions="StartAndExpand">
                    <CollectionView.ItemsLayout>
                        <LinearItemsLayout Orientation="Vertical"
                                       SnapPointsType="None"
                                       SnapPointsAlignment="Start"
                                       ItemSpacing="10" />
                    </CollectionView.ItemsLayout>

                    <CollectionView.ItemTemplate>
                        <DataTemplate x:DataType="models:Order">
                            <Frame Padding="10"
                              BackgroundColor="#292929"
                              CornerRadius="20"
                              HasShadow="True"
                              BorderColor="White">
                                <VerticalStackLayout>
                                    <Frame Padding="5" BackgroundColor="#858585" BorderColor="#858585">
                                        <StackLayout Orientation="Horizontal" Spacing="10">
                                            <Label Text="Numer zamówienia:"
                                                   FontSize="15"
                                                   FontAttributes="Bold"
                                                   TextColor="Black"/>
                                            <Label Text="{Binding OrderNumber}"
                                           FontSize="15"
                                           TextColor="Black" />
                                        </StackLayout>
                                    </Frame>
                                    <Frame Padding="5" Margin="0, 5" BackgroundColor="#858585" BorderColor="#858585">
                                        <StackLayout Orientation="Horizontal" Spacing="10">
                                            <Label Text="Data:"
                                                       FontSize="15"
                                                       FontAttributes="Bold"
                                                       TextColor="Black"/>
                                            <Label Text="{Binding OrderDate}"
                                                           FontSize="15"
                                                           TextColor="Black" />

                                        </StackLayout>
                                    </Frame>
                                    <Frame Padding="5" BackgroundColor="#858585" BorderColor="#858585">
                                        <StackLayout Orientation="Horizontal" Spacing="10">
                                            <Label Text="Suma brutto:"
                                                   FontSize="15"
                                                   FontAttributes="Bold"
                                                   TextColor="Black"/>
                                            <!--<Label Text="{Binding OrderDate}"
                                               FontSize="15"
                                               TextColor="Black" />-->
                                        </StackLayout>
                                    </Frame>
                                    <Frame Padding="5" Margin ="0,5" BackgroundColor="#858585" BorderColor="#858585">
                                        <StackLayout Orientation="Vertical" Spacing="10">
                                            <Label Text="Uwagi do zamówienia:"
                                                   FontSize="15"
                                                   FontAttributes="Bold"
                                                   TextColor="Black"/>
                                            <Label Text="{Binding Comments}"
                                                   FontSize="15"
                                                   TextColor="Black"/>
                                        </StackLayout>
                                    </Frame>
                                    <CollectionView ItemsSource="{Binding OrderSpecs}">
                                        <CollectionView.ItemTemplate>
                                            <DataTemplate x:DataType="models:OrderSpec">
                                                <HorizontalStackLayout>

                                                    <Label Text="{Binding Name}" TextColor="White" />
                                                    <Label Text=" - " TextColor="White"/>
                                                    <Label Text="{Binding Realization}" TextColor="White"/>
                                                </HorizontalStackLayout>
                                            </DataTemplate>
                                        </CollectionView.ItemTemplate>
                                    </CollectionView>
                                </VerticalStackLayout>
                            </Frame>
                        </DataTemplate>
                    </CollectionView.ItemTemplate>
                </CollectionView>
            </StackLayout>
        </ScrollView>
        <StackLayout VerticalOptions="End">
            <ImageButton Source="add.png"
                 Background="Transparent"
                 Command="{Binding AddOrderCommand}"
                 HeightRequest="100"
                 WidthRequest="100"
                 HorizontalOptions="End"/>
        </StackLayout>
    </Grid>
</ContentPage>